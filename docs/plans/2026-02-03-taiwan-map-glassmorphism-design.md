# 台灣地圖玻璃擬態設計

## 設計日期
2026-02-03

## 問題描述
目前的台灣地圖使用六角形（hexagonal）抽象表示，視覺效果不理想：
- 地圖形狀不像真實的台灣
- 配色單調，缺乏視覺層次
- 整體質感不足

## 設計目標
1. 使用真實的台灣地圖輪廓（真實縣市邊界）
2. 實作玻璃擬態（Glassmorphism）視覺效果
3. 在深色背景上呈現立體感和發光效果
4. 提升整體質感和視覺吸引力

## 視覺設計

### 整體風格
- **背景**：深色背景（#0f172a 或 #1e293b）
- **風格**：玻璃擬態 + 發光效果
- **主題**：深色地圖卡片在淺色主題中形成視覺焦點

### 縣市視覺分級

根據露營次數呈現不同的視覺效果：

#### 未去過（0次）
- 顏色：深灰色半透明 `rgba(51, 65, 85, 0.6)`
- 發光：無
- 邊框：細微深色線條

#### 去過 1-2 次
- 顏色：淺藍色半透明 `rgba(56, 189, 248, 0.3)`
- 效果：內部白色微光漸層（上→下）
- 發光：柔和藍色外發光（blur: 8px）

#### 去過 3-5 次
- 顏色：青色半透明 `rgba(34, 211, 238, 0.4)`
- 效果：明顯的白色高光
- 發光：青色外發光（blur: 12px）

#### 去過 6+ 次
- 顏色：明亮青色半透明 `rgba(6, 182, 212, 0.5)`
- 效果：明顯玻璃反光效果
- 發光：強烈青色外發光（blur: 16px）+ 白色內發光

## 互動設計

### Hover 效果
滑鼠移到縣市時：
- 亮度提升 20%
- 外發光強度增加 1.5 倍
- 邊框出現金色高光（#fbbf24, 2px）
- 輕微放大（scale: 1.02）
- 過渡動畫：200ms ease-out

### Tooltip
- 風格：玻璃擬態
- 背景：深色半透明 + 毛玻璃模糊（backdrop-blur）
- 邊框：微妙的青色發光
- 內容：縣市名稱（粗體、亮色）+ 露營次數
- 位置：跟隨滑鼠，偏移避免遮擋

### 載入動畫
地圖初次載入：
- 縣市依序淡入（北→南）
- 透明度：0 → 最終狀態
- 縮放：0.95 → 1
- 總時長：約 800ms

## 技術實作

### 地圖資料來源
- **來源**：政府開放資料平台或 Natural Earth Data
- **格式**：GeoJSON → SVG path
- **處理**：使用 TopoJSON 簡化演算法
- **輸出**：更新 `src/constants/taiwanMapSvg.ts`

### SVG 結構
```xml
<svg>
  <defs>
    <!-- 定義濾鏡：發光、模糊、陰影 -->
    <filter id="glow-weak">...</filter>
    <filter id="glow-medium">...</filter>
    <filter id="glow-strong">...</filter>

    <!-- 定義漸層：內部高光 -->
    <linearGradient id="glass-highlight">...</linearGradient>
  </defs>

  <!-- 背景層 -->
  <rect class="background" />

  <!-- 縣市路徑 -->
  <g class="cities">
    <path v-for="city" ... />
  </g>
</svg>
```

### 玻璃擬態實作技術
- `backdrop-filter: blur()` - 毛玻璃效果
- SVG `<filter>` - 外發光效果
- `<linearGradient>` - 內部高光
- `mix-blend-mode` - 視覺混合效果

### 顏色計算邏輯
改進策略：
- 不使用單一 HSL 漸層
- 採用分級系統（0, 1-2, 3-5, 6+）
- 每級預設顏色 + 動態調整透明度和發光
- 最多次的縣市可用特殊色（金色或彩虹漸層）

## 效能考量

### 優化策略
- SVG 路徑預先簡化（減少節點數）
- 使用 CSS transform（GPU 加速）
- Hover 效果避免重繪
- 濾鏡效果適度使用

### 響應式設計
- 地圖自動縮放適應螢幕
- 保持長寬比
- 小螢幕調整發光強度
- Tooltip 智能位置調整

## 可訪問性

- 每個縣市加上 `aria-label`
- 支援鍵盤導航（Tab 切換）
- 色盲友善：結合顏色 + 發光強度
- 語義化 HTML 結構

## 實作檔案

需要修改的檔案：
1. `src/constants/taiwanMapSvg.ts` - 更新為真實地圖資料
2. `src/components/charts/TaiwanChoroplethMap.vue` - 重構視覺效果
3. 新增 CSS/樣式定義（SVG 濾鏡和漸層）

## 成功標準

- ✅ 地圖使用真實台灣縣市輪廓
- ✅ 實現玻璃擬態視覺效果
- ✅ 露營次數視覺分級清晰
- ✅ Hover 互動流暢（無卡頓）
- ✅ 在淺色主題中視覺效果突出
- ✅ 響應式設計在各裝置正常運作
- ✅ 保持良好效能（無明顯延遲）
